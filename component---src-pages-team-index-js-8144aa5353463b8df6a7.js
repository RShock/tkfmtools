(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[164],{22702:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var n=a(27490),i=a(47895),r=a(67294),o=a(85505),l=a(49044),s=a(19123),c=(0,s.Z)(r.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=(0,s.Z)(r.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=a(37595),u=(0,s.Z)(r.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=a(81664),g=a(34621),h=r.createElement(d,null),f=r.createElement(c,null),v=r.createElement(u,null),y=r.forwardRef((function(e,t){var a=e.checkedIcon,s=void 0===a?h:a,c=e.classes,d=e.color,m=void 0===d?"secondary":d,u=e.icon,g=void 0===u?f:u,y=e.indeterminate,x=void 0!==y&&y,b=e.indeterminateIcon,E=void 0===b?v:b,S=e.inputProps,w=e.size,Z=void 0===w?"medium":w,C=(0,i.Z)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),k=x?E:g,I=x?E:s;return r.createElement(l.Z,(0,n.Z)({type:"checkbox",classes:{root:(0,o.Z)(c.root,c["color".concat((0,p.Z)(m))],x&&c.indeterminate),checked:c.checked,disabled:c.disabled},color:m,inputProps:(0,n.Z)({"data-indeterminate":x},S),icon:r.cloneElement(k,{fontSize:void 0===k.props.fontSize&&"small"===Z?Z:k.props.fontSize}),checkedIcon:r.cloneElement(I,{fontSize:void 0===I.props.fontSize&&"small"===Z?Z:I.props.fontSize}),ref:t},C))})),x=(0,g.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,m.U1)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,m.U1)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(y)},62846:function(e,t,a){"use strict";var n=a(27490),i=a(47895),r=a(67294),o=a(85505),l=a(34621),s=a(37595),c=r.forwardRef((function(e,t){var a=e.absolute,l=void 0!==a&&a,s=e.classes,c=e.className,d=e.component,m=void 0===d?"hr":d,u=e.flexItem,p=void 0!==u&&u,g=e.light,h=void 0!==g&&g,f=e.orientation,v=void 0===f?"horizontal":f,y=e.role,x=void 0===y?"hr"!==m?"separator":void 0:y,b=e.variant,E=void 0===b?"fullWidth":b,S=(0,i.Z)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return r.createElement(m,(0,n.Z)({className:(0,o.Z)(s.root,c,"fullWidth"!==E&&s[E],l&&s.absolute,p&&s.flexItem,h&&s.light,"vertical"===v&&s.vertical),role:x,ref:t},S))}));t.Z=(0,l.Z)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:(0,s.U1)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(c)},80838:function(e,t,a){"use strict";var n=a(47895),i=a(27490),r=a(67294),o=a(85505),l=a(34621),s=[0,1,2,3,4,5,6,7,8,9,10],c=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=parseFloat(e);return"".concat(a/t).concat(String(e).replace(String(a),"")||"px")}var m=r.forwardRef((function(e,t){var a=e.alignContent,l=void 0===a?"stretch":a,s=e.alignItems,c=void 0===s?"stretch":s,d=e.classes,m=e.className,u=e.component,p=void 0===u?"div":u,g=e.container,h=void 0!==g&&g,f=e.direction,v=void 0===f?"row":f,y=e.item,x=void 0!==y&&y,b=e.justify,E=void 0===b?"flex-start":b,S=e.lg,w=void 0!==S&&S,Z=e.md,C=void 0!==Z&&Z,k=e.sm,I=void 0!==k&&k,P=e.spacing,_=void 0===P?0:P,N=e.wrap,F=void 0===N?"wrap":N,T=e.xl,z=void 0!==T&&T,L=e.xs,M=void 0!==L&&L,j=e.zeroMinWidth,O=void 0!==j&&j,R=(0,n.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),D=(0,o.Z)(d.root,m,h&&[d.container,0!==_&&d["spacing-xs-".concat(String(_))]],x&&d.item,O&&d.zeroMinWidth,"row"!==v&&d["direction-xs-".concat(String(v))],"wrap"!==F&&d["wrap-xs-".concat(String(F))],"stretch"!==c&&d["align-items-xs-".concat(String(c))],"stretch"!==l&&d["align-content-xs-".concat(String(l))],"flex-start"!==E&&d["justify-xs-".concat(String(E))],!1!==M&&d["grid-xs-".concat(String(M))],!1!==I&&d["grid-sm-".concat(String(I))],!1!==C&&d["grid-md-".concat(String(C))],!1!==w&&d["grid-lg-".concat(String(w))],!1!==z&&d["grid-xl-".concat(String(z))]);return r.createElement(p,(0,i.Z)({className:D,ref:t},R))})),u=(0,l.Z)((function(e){return(0,i.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var a={};return s.forEach((function(n){var i=e.spacing(n);0!==i&&(a["spacing-".concat(t,"-").concat(n)]={margin:"-".concat(d(i,2)),width:"calc(100% + ".concat(d(i),")"),"& > $item":{padding:d(i,2)}})})),a}(e,"xs"),e.breakpoints.keys.reduce((function(t,a){return function(e,t,a){var n={};c.forEach((function(e){var t="grid-".concat(a,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");n[t]={flexBasis:i,flexGrow:0,maxWidth:i}}else n[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===a?(0,i.Z)(e,n):e[t.breakpoints.up(a)]=n}(t,e,a),t}),{}))}),{name:"MuiGrid"})(m);t.Z=u},49963:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var n=a(67294),i=a(50190),r=a(50009),o=a(27490),l=a(47895),s=a(85505),c=a(34621),d=a(81664),m=n.forwardRef((function(e,t){var a=e.classes,i=e.className,r=e.color,c=void 0===r?"default":r,m=e.component,u=void 0===m?"li":m,p=e.disableGutters,g=void 0!==p&&p,h=e.disableSticky,f=void 0!==h&&h,v=e.inset,y=void 0!==v&&v,x=(0,l.Z)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return n.createElement(u,(0,o.Z)({className:(0,s.Z)(a.root,i,"default"!==c&&a["color".concat((0,d.Z)(c))],y&&a.inset,!f&&a.sticky,!g&&a.gutters),ref:t},x))})),u=(0,c.Z)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(m),p=a(65541),g=a(44961),h=(0,r.ZP)(i.Z).withConfig({displayName:"StageSelect__StyledInput",componentId:"iyjsu9-0"})(["&&{margin:0.4rem 0;width:100%;svg{fill:",";}}"],(e=>e.theme.colors.onSurface)),f=(0,r.ZP)(u).withConfig({displayName:"StageSelect__StyledListSubheader",componentId:"iyjsu9-1"})(["&&{color:",";font-size:1rem;font-style:italic;line-height:2rem;}"],(e=>e.theme.colors.onSurface)),v=e=>{var{children:t,className:a,value:i,error:o,handleChange:l}=e,{pageString:s,stageString:c}=(0,g.f)(),{colors:d}=(0,r.Fg)();return n.createElement(h,{className:a,label:s.team.build.stageSelectLabel,id:"select-stage",onChange:l,select:!0,value:i,SelectProps:{MenuProps:{PaperProps:{style:{backgroundColor:d.surface}},MenuListProps:{style:{backgroundColor:d.surface,color:d.onSurface},dense:!0}}},variant:"outlined",size:"small",inputProps:{"aria-label":"select-stage"},error:o,helperText:o&&s.team.build.stageSelectHelpText},t,c.map((e=>{var t;return[n.createElement(f,{key:e.name},e.name),null===(t=e.stages)||void 0===t?void 0:t.map((t=>n.createElement(p.Z,{value:e.chapter+"/"+t.id,key:t.id},t.id+" : "+t.name))),e.stagePrefix&&[...Array(61).keys()].slice(1).map((t=>n.createElement(p.Z,{value:e.chapter+"/"+e.chapter+"-"+t,key:e.chapter+"-"+t},e.chapter+"-"+t+" : "+e.stagePrefix+t+e.stageSuffix)))]})))}},65746:function(e,t,a){"use strict";var n=a(67294),i=a(77447);t.Z=e=>{var{className:t,layoutSwitcher:a,localStorageKey:r,items:o,initLayoutIndex:l,unmountOnLeave:s}=e,{layout:c,canRender:d,setLayout:m}=(0,i.Z)(r,o.map((e=>e.layout)),l,s);return n.createElement(n.Fragment,null,a&&n.cloneElement(a,{layout:c,setLayout:m}),o.map(((e,a)=>n.createElement("div",{className:t,hidden:c!==e.layout,key:e.layout},d[a]&&e.content))))}},93061:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ce}});var n=a(73108),i=a(12265),r=a(67294),o=a(50009),l=a(83332),s=a(22702),c=a(62846),d=a(80838),m=a(80791),u=a(4381),p=a(27490),g=a(47895),h=a(85505),f=a(34621),v=r.forwardRef((function(e,t){var a=e.classes,n=e.className,i=(0,g.Z)(e,["classes","className"]);return r.createElement("div",(0,p.Z)({className:(0,h.Z)(a.root,n),ref:t},i))}));v.muiName="ListItemSecondaryAction";var y=(0,f.Z)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(v),x=a(65541),b=a(28001),E=a(44961),S=a(65746),w=a(47378),Z=a(25072),C=a(78032),k=a(27136),I={items:[],isFetching:!1,loadMore:!0},P=(e,t)=>{switch(t.type){case"PUSH":return Object.assign({},e,{items:e.items.concat(t.items)});case"UNSHIFT":return Object.assign({},e,{items:t.items.concat(e.items)});case"RESET":return I;case"FETCH":return Object.assign({},e,{isFetching:t.isFetching});case"LOAD_MORE":return Object.assign({},e,{loadMore:t.loadMore});default:throw new Error}},_=(0,o.ZP)(k.Z).withConfig({displayName:"InfiniteLoader__StyledSpinner",componentId:"sc-10rq99b-0"})(["&&{display:block;margin:auto;color:",";}"],(e=>e.theme.colors.secondary)),N=e=>{var{listenLatestUpdate:t,fetchItem:a,renderItem:n,hasVisited:i,onResetVisited:o}=e,{0:l,1:s}=(0,r.useReducer)(P,I),c=(0,r.useRef)();return(0,r.useEffect)((()=>{if(c.current){var e=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>0&&s({type:"LOAD_MORE",loadMore:!0})}))})).observe(c.current);return e?()=>e.unobeserve(c.current):void 0}}),[c]),(0,r.useEffect)((()=>{var e=t(s);if(e)return()=>e()}),[t]),(0,r.useEffect)((()=>{l.loadMore&&!l.isFetching&&(s({type:"FETCH",isFetching:!0}),a().then((e=>{0!==(null==e?void 0:e.length)&&s({type:"PUSH",items:e}),s({type:"FETCH",isFetching:!1}),s({type:"LOAD_MORE",loadMore:!1})})).catch((e=>{s({type:"FETCH",isFetching:!1}),s({type:"LOAD_MORE",loadMore:!1}),console.log(e)})))}),[a,l.loadMore]),(0,r.useEffect)((()=>{i||(s({type:"RESET"}),o())}),[i,o]),r.createElement(r.Fragment,null,r.createElement(m.Z,null,l.items.map((e=>n(e))),r.createElement("div",{ref:c})),l.isFetching&&r.createElement(_,{size:32,thickness:6,disableShrink:!0}))},F=a(93175),T=a(57693),z=a(22727),L=a(49963),M=a(79520),j=a(28437),O=a(48030),R=["key"],D=()=>{var e,{pageString:t}=(0,E.f)(),{isImportingLineup:a,actions:n}=(0,b.q)(),{toggleImportLineupData:i}=n,{0:o,1:l}=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(T.Z,{button:r.createElement(z.ZP,{tooltipText:t.team.index.settingTooltip},j.qY),items:[{id:"setting-description"}],renderItem:e=>r.createElement(r.Fragment,null,r.createElement(s.Z,{edge:"start",checked:a,disableRipple:!0,inputProps:{"aria-labelledby":e.id}}),r.createElement("span",{id:e.id},t.team.index.settingDescription)),itemOnClick:()=>{i()||l(!0)},ariaId:"setting-menu"}),r.createElement(M.Z,{open:o,onClose:(e=!1,()=>l(e)),message:t.team.index.errorSnackbar,type:"error"}))},H=["local","cloud"],W=e=>{var{layout:t,setLayout:a}=e,{pageString:n}=(0,E.f)();return r.createElement(q,null,H.map((e=>r.createElement(V,{$active:t===e,onClick:()=>a(e),key:e},n.team.index.tabs[e]))))},q=o.ZP.div.withConfig({displayName:"team__TabsWrapper",componentId:"sc-91g1dd-0"})(["position:absolute;top:0.5rem;"]),V=(0,o.ZP)(l.Z).withConfig({displayName:"team__StyledTab",componentId:"sc-91g1dd-1"})(["&&{color:",";font-size:large;}"],(e=>e.theme.colors.onSurface+(e.$active?"":"80"))),A=e=>{var{chars:t}=e,{charString:a}=(0,E.f)();return t.every((e=>void 0===e||void 0===e.id))?r.createElement(B,null,r.createElement(G,null)):r.createElement(B,null,t.map(((e,t)=>(null==e?void 0:e.id)&&r.createElement(U,{key:t,name:"char_small_"+e.id,alt:a.name[e.id]}))))},B=o.ZP.div.withConfig({displayName:"team__CharContainer",componentId:"sc-91g1dd-2"})(["display:flex;flex-wrap:nowrap;overflow-x:hidden;"]),U=(0,o.ZP)(F.Z).withConfig({displayName:"team__CharImg",componentId:"sc-91g1dd-3"})(["flex:0 0 auto;width:3rem;height:3rem;overflow:hidden;"]),G=o.ZP.div.withConfig({displayName:"team__EmptySlot",componentId:"sc-91g1dd-4"})(["flex:0 0 auto;width:3rem;height:3rem;overflow:hidden;"]),$=e=>{var t,{isFromPlayer:a,isFromEnemies:n,lineups:o}=e,{pageString:l}=(0,E.f)(),{localTeams:s,actions:c}=(0,b.q)(),{newTeam:d,getTeam:u,selectTeam:p,pushTeam:g,deleteTeam:h}=c,{0:f,1:v}=(0,r.useState)(!1),x=(e,t)=>i=>{a||n?(e.some((e=>e.id&&0===e.level.length))||e.every((e=>!e.id)))&&(i.preventDefault(),v(!0)):p(t)};return r.createElement(r.Fragment,null,r.createElement(m.Z,null,r.createElement(K,{component:C.Z,to:"/team/build/",button:!0,key:"new",onClick:()=>d()},r.createElement(Y,null,j.k8,r.createElement("span",null,l.team.index.newComposition))),null==s?void 0:s.map(((e,t)=>{var s;if(a||n){var c=e.characters.filter((e=>e.id)).map((e=>(0,i.Z)(e,R)));s=a?[c,o[1]]:[o[0],c]}return r.createElement(K,{component:C.Z,to:a||n?"/battle/":"/team/build/",state:a||n?{lineups:s,isFromPlayer:a,isFromEnemies:n}:void 0,replace:a||n,button:!0,key:t,onClick:x(e.characters,t)},r.createElement(J,null,e.name),r.createElement(A,{chars:e.characters}),r.createElement(y,null,r.createElement(Q,{onClick:()=>g(u(t)),tooltipText:l.team.index.copyTooltip,edge:"end","aria-label":"copy-team"},j.TI),r.createElement(Q,{onClick:()=>h(t),tooltipText:l.team.index.deleteTooltip,edge:"end","aria-label":"delete-team"},j.pJ)))}))),r.createElement(M.Z,{open:f,onClose:(t=!1,()=>v(t)),message:l.team.index.errorSelectSnackbar,type:"error"}))},K=(0,o.ZP)(u.Z).withConfig({displayName:"team__DataItem",componentId:"sc-91g1dd-5"})(["&&{margin-bottom:0.6rem;padding-right:6.8rem;color:",";}background:linear-gradient( 90deg,",","," );"],(e=>e.theme.colors.onSurface),(e=>e.theme.colors.shadow+"2A"),(e=>e.theme.colors.shadow+"0D")),Y=o.ZP.div.withConfig({displayName:"team__NewButton",componentId:"sc-91g1dd-6"})(["display:flex;align-items:center;height:3rem;svg{width:2rem;height:2rem;fill:",";}span{margin-left:1rem;font-size:large;line-height:normal;}"],(e=>e.theme.colors.onSurface)),J=o.ZP.span.withConfig({displayName:"team__TitleText",componentId:"sc-91g1dd-7"})(["width:8rem;color:",";font-size:small;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.theme.colors.onSurface)),Q=(0,o.ZP)(z.ZP).withConfig({displayName:"team__OperationButton",componentId:"sc-91g1dd-8"})(["svg{width:1.4rem;height:1.4rem;}"]),X=e=>{var{team:t,handleSelectTeam:a}=e,{pageString:n,stageString:i,userLanguage:o}=(0,E.f)(),l=i.find((e=>e.chapter===t.chapter)),s="S"===t.chapter?l.stagePrefix+t.stage.slice(2)+l.stageSuffix:l.stages.find((e=>e.id===t.stage)).name;return r.createElement(ee,{component:C.Z,to:"/team/build/",button:!0,onClick:a(t)},r.createElement(d.Z,{container:!0,spacing:1},r.createElement(te,{item:!0,xs:6},t.stage+" : "+s),r.createElement(te,{item:!0,xs:6},r.createElement(ae,null,n.team.index.author+" : "+t.author),r.createElement(ae,null,t.time.toDate().toLocaleString(O[o].locale,{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}))),r.createElement(te,{item:!0,xs:12},r.createElement(A,{chars:t.characters})),0!==t.description.length&&r.createElement(te,{item:!0,xs:12},t.description)))},ee=(0,o.ZP)(K).withConfig({displayName:"team__StyledCloudTeamItem",componentId:"sc-91g1dd-9"})(["&&{padding-right:1rem;user-select:text;}> div{> div:nth-child(2){justify-content:flex-end;> span:first-child{margin:0;}}> div:nth-child(4){margin-top:0.4rem;padding:0.4rem;font-size:small;background:linear-gradient( 90deg,",","," );}}"],(e=>e.theme.colors.shadow+"2A"),(e=>e.theme.colors.shadow+"0D")),te=(0,o.ZP)(d.Z).withConfig({displayName:"team__GridItem",componentId:"sc-91g1dd-10"})(["display:flex;align-items:center;"]),ae=o.ZP.span.withConfig({displayName:"team__FootText",componentId:"sc-91g1dd-11"})(["margin-left:1rem;font-size:0.75rem;"]),ne=()=>{var{pageString:e}=(0,E.f)(),{actions:t}=(0,b.q)(),{newTeam:i}=t,{0:o,1:l}=(0,r.useState)({chapter:"all",stage:"all",hasFirestoreLoaded:!1,hasVisited:!0,orderKey:"time",orderDirection:"desc",query:null,lastItem:null}),s=(0,r.useRef)();(0,r.useEffect)((()=>{Promise.all([a.e(828),a.e(513)]).then(a.bind(a,81634)).then((e=>{s.current=e.teamsRef,l((e=>Object.assign({},e,{hasFirestoreLoaded:!0})))}))}),[]),(0,r.useEffect)((()=>{if(s.current){var e=s.current.orderBy(o.orderKey,o.orderDirection);"all"!==o.chapter&&(e=e.where("chapter","==",o.chapter).where("stage","==",o.stage)),l((t=>Object.assign({},t,{query:e,hasVisited:!1})))}}),[o.chapter,o.stage,o.orderKey,o.orderDirection,o.hasFirestoreLoaded]);var c=(0,r.useCallback)((e=>{if(o.query)return o.query.limit(1).onSnapshot((t=>{var a=t.docChanges().filter((e=>"added"===e.type)).map((e=>Object.assign({id:e.doc.id},e.doc.data())));e({type:"UNSHIFT",items:a})}),(e=>{console.log(e)}))}),[o.query]),d=(0,r.useCallback)((0,n.Z)((function*(){if(o.query){var e=o.lastItem?o.query.startAfter(o.lastItem).limit(10):o.query.limit(10),t=yield e.get(),a=o.lastItem?t.docs:t.docs.slice(1),n=a[a.length-1];return n?(l((e=>Object.assign({},e,{lastItem:n}))),a.map((e=>Object.assign({id:e.id},e.data())))):[]}})),[o.query,o.lastItem]),m=e=>()=>{var{name:t,characters:a}=e;i({name:t,characters:a})};return r.createElement(r.Fragment,null,r.createElement(ie,{value:o.chapter+"/"+o.stage,handleChange:e=>{if(e.target.value){var t=e.target.value.split("/");l((e=>Object.assign({},e,{chapter:t[0],stage:t[1],hasVisited:!1,lastItem:null})))}}},r.createElement(x.Z,{value:"all/all"},e.team.index.allStage)),r.createElement(N,{listenLatestUpdate:c,fetchItem:d,renderItem:e=>e&&r.createElement(X,{team:e,handleSelectTeam:m,key:e.id}),hasVisited:o.hasVisited,onResetVisited:()=>l(Object.assign({},o,{hasVisited:!0}))}))},ie=(0,o.ZP)(L.Z).withConfig({displayName:"team__StyledStageSelect",componentId:"sc-91g1dd-12"})(["&&{position:absolute;top:-3.2rem;right:3rem;width:30%;height:2rem;.MuiSelect-select{padding:0.5rem 2rem 0.5rem 1rem;font-size:small;}}"]),re=o.ZP.div.withConfig({displayName:"team__PageWrapper",componentId:"sc-91g1dd-13"})(["position:relative;max-width:1000px;margin:auto;"]),oe=(0,o.ZP)(Z.ZP).withConfig({displayName:"team__StyledHeader",componentId:"sc-91g1dd-14"})(["position:relative;left:-1rem;width:100%;height:auto;margin:0;padding:0 0 0.5rem 1rem;border:none;label{margin-right:0.6rem;font-size:large;}> div:last-child{position:relative;bottom:-0.4rem;right:-1rem;}"]),le=(0,o.ZP)(c.Z).withConfig({displayName:"team__StyledDivider",componentId:"sc-91g1dd-15"})(["&&{background-color:",";}"],(e=>e.theme.colors.dropdownHover)),se=(0,o.ZP)(S.Z).withConfig({displayName:"team__TabPanel",componentId:"sc-91g1dd-16"})(["position:relative;"]),ce=e=>{var t,a,n,i,o,l,{location:s}=e,{pageString:c}=(0,E.f)();return r.createElement(re,null,r.createElement(w.Z,{title:c.team.index.helmet.title,description:c.team.index.helmet.description,path:"/team/"}),r.createElement(oe,{title:null!==(t=s.state)&&void 0!==t&&t.isFromPlayer||null!==(a=s.state)&&void 0!==a&&a.isFromEnemies?c.team.index.selectTeam:void 0,end:r.createElement(D,null)}),r.createElement(le,null),r.createElement(se,{localStorageKey:"team-list-tab",layoutSwitcher:!(null!==(n=s.state)&&void 0!==n&&n.isFromPlayer||null!==(i=s.state)&&void 0!==i&&i.isFromEnemies)&&r.createElement(W,null),items:[{layout:"local",content:r.createElement($,s.state)},{layout:"cloud",content:!(null!==(o=s.state)&&void 0!==o&&o.isFromPlayer||null!==(l=s.state)&&void 0!==l&&l.isFromEnemies)&&r.createElement(ne,null)}],initLayoutIndex:0}))}}}]);
//# sourceMappingURL=component---src-pages-team-index-js-8144aa5353463b8df6a7.js.map