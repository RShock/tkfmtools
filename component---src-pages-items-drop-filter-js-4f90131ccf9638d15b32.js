(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[302],{24452:function(e,t,r){"use strict";var a=r(67294),l=r(50009),n=r(50033),i=r(44961),o=r(25072),s=r(87001),m=(0,l.ZP)(n.Z).withConfig({displayName:"ResultTablePanel__TableWrapper",componentId:"lhulap-0"})(["max-height:",";overflow-x:hidden;overflow-y:auto;"],(e=>e.$maxHeight)),c=(0,l.ZP)(s.ZP).withConfig({displayName:"ResultTablePanel__StyledSortableTable",componentId:"lhulap-1"})(["img{width:1.8rem;height:1.8rem;}td{padding-left:0.75rem;}"]);t.Z=e=>{var{data:t,head:r,body:l,sortFunc:n,defaultSortKey:s,handleModalOpen:d,maxHeight:p,striped:g,headerEnd:u}=e,{pageString:f}=(0,i.f)();return a.createElement(a.Fragment,null,a.createElement(o.ZP,{title:f.items.drop.filter.resultTitle,withHelp:!0,onClickHelp:d,end:u,border:!0}),a.createElement(m,{$maxHeight:p},a.createElement(c,{data:t,head:r,body:l,sortFunc:n,defaultSortKey:s,striped:g})))}},26465:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(12265),l=r(67294),n=r(50009),i=r(4093),o=r(86300),s=r(99395),m=r(49400),c=r(54480),d=r(44961),p=r(47378),g=r(24452),u=r(87001),f=r(25072),h=r(22727),y=r(82195),E=r(93175),b=r(22776),v=r(28437),Z=r(20156),k=["materials","trainItems","expPotions"],S={};Z.forEach((e=>{e.stages.forEach((t=>{var{materials:r,trainItems:l,expPotions:n}=t,i=(0,a.Z)(t,k);[r,l,n].forEach((t=>{t.forEach((t=>{var r=Object.assign({chapter:e.chapter,rarity:t.rarity},i);S[t.id]?S[t.id].drop.push(r):S[t.id]={drop:[r]}}))}))}))}));for(var I=1;I<11;I++)S[(500+I).toString()]={drop:[]};for(var C=1;C<3;C++)S[(900+C).toString()]={drop:[]};var P=S,w=["materials","trainItems","expPotions"],_={en:{1360:4,992:3,768:4,624:3,0:2},"zh-TW":{1360:5,992:4,768:5,624:4,410:3,0:2},ja:{1360:5,992:4,768:5,624:4,410:3,0:2},ko:{1460:5,1200:4,1e3:3,920:5,740:4,570:3,0:2}},O=e=>{var{filterBtnValue:t,filterBy:r,clearBtnValue:a}=e,{userLanguage:n,pageString:i,itemString:o}=(0,d.f)();return l.createElement(l.Fragment,null,l.createElement(f.ZP,{title:i.items.drop.filter.itemPanelTitle,end:l.createElement(h.Io,{onClick:a,tooltipText:i.items.drop.filter.deleteTooltip},v.pJ),border:!0}),l.createElement(y.Z,{value:t,onChange:r,layoutConfig:_[n]},Object.entries(P).map(((e,t)=>{var[r,a]=e;return 0===a.drop.length?null:l.createElement(x,{value:r,key:t},l.createElement(B,{name:"item_"+r,alt:""}),o.name[r])}))))},x=(0,n.ZP)(y.C).withConfig({displayName:"filter__StyledToggleButton",componentId:"sc-1e6kgg1-0"})(["display:flex;justify-content:center;align-items:center;font-size:0.85rem;"]),B=(0,n.ZP)(E.Z).withConfig({displayName:"filter__ItemImg",componentId:"sc-1e6kgg1-1"})(["width:2.26rem;height:2.26rem;"]),H=e=>{var{requestSort:t,getSortDirection:r,data:a}=e,{pageString:n,itemString:i}=(0,d.f)();return 0===a.length?l.createElement(u.Re,null,n.items.drop.filter.tableHead[1]):Object.keys(a[0]).map(((e,a)=>"stage"===e||"energy"===e?null:l.createElement(T,{key:e,onClick:()=>t(e),direction:r(e)},l.createElement(j,{name:"item_"+e,alt:i.name[e]}))))},T=(0,n.ZP)(u.Re).withConfig({displayName:"filter__ImgTh",componentId:"sc-1e6kgg1-2"})(["&:after{position:absolute;top:calc(50% - 0.75rem);margin-left:2rem;}"]),j=(0,n.ZP)(E.Z).withConfig({displayName:"filter__TableImg",componentId:"sc-1e6kgg1-3"})(["width:1.8rem;height:1.8rem;"]),V=e=>{var{requestSort:t,getSortDirection:r,sortedData:a}=e,{pageString:n}=(0,d.f)();return l.createElement(i.Z,null,l.createElement(s.Z,null,l.createElement(u.Re,{onClick:()=>t("stage"),direction:r("stage")},n.items.drop.filter.tableHead[0]),l.createElement(H,{requestSort:t,getSortDirection:r,data:a}),l.createElement(T,{onClick:()=>t("energy"),direction:r("energy")},l.createElement(j,{name:"energy",alt:n.items.drop.filter.tableHead[2]}))))},M=e=>{var{sortedData:t}=e,{itemString:r}=(0,d.f)();return l.createElement(o.Z,null,t.map(((e,t)=>l.createElement(s.Z,{hover:!0,key:e.stage},l.createElement(m.Z,null,e.stage),Object.entries(e).map(((e,t)=>{var[a,n]=e;return"stage"===a||"energy"===a?null:l.createElement(m.Z,{key:t},r.rarity[n])})),l.createElement(m.Z,null,e.energy)))))},D=(e,t)=>{var r=e=>{var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)};e.sort(((e,a)=>{var l,n;return"stage"===t.key?(l=r(e.stage),n=r(a.stage)):(l=e[t.key],n=a[t.key]),l<n?"asc"===t.direction?-1:1:l>n?"asc"===t.direction?1:-1:0}))},F=()=>{var{pageString:e}=(0,d.f)(),{0:t,1:r}=(0,l.useState)({filterBtnValue:[],data:[],isHelpModalOpen:!1}),n=(e,t)=>{if(0!==t.length){var l=[].concat(...Z.map((e=>e.stages.map((t=>{var{materials:r,trainItems:l,expPotions:n}=t,i=(0,a.Z)(t,w);return Object.assign({},i,{drops:r.concat(l,n),chapter:e.chapter})}))))).filter((e=>t.every((t=>{var r=!1;return e.drops.forEach((e=>{if(e.id===t)return r=!0,!1})),r}))));l=l.map((e=>{var r={stage:e.chapter+"-"+e.stage,energy:e.energy};return e.drops.forEach((e=>{t.includes(e.id)&&(r[e.id]=e.rarity)})),r})),r((e=>Object.assign({},e,{filterBtnValue:t,data:l})))}else r((e=>Object.assign({},e,{filterBtnValue:t,data:[]})))},i=e=>()=>{r((t=>Object.assign({},t,{isHelpModalOpen:e})))};return l.createElement(l.Fragment,null,l.createElement(p.Z,{title:e.items.drop.filter.helmet.title,description:e.items.drop.filter.helmet.description,path:"/items/drop/filter/"}),l.createElement(c.Z,{panelsWidth:["62%","38%"]},l.createElement(O,{filterBtnValue:t.filterBtnValue,filterBy:n,clearBtnValue:e=>n(0,[])}),l.createElement(g.Z,{data:t.data,head:l.createElement(V,null),body:l.createElement(M,null),sortFunc:D,defaultSortKey:t.filterBtnValue[0],handleModalOpen:i(!0),maxHeight:"calc(100vh - 16rem)",striped:!0})),l.createElement(b.p2,{title:e.items.drop.filter.helpModal.title,open:t.isHelpModalOpen,onClose:i(!1),content:e.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-4f90131ccf9638d15b32.js.map