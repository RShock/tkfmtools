{"version":3,"sources":["webpack://tkfmtools/./src/components/ResultTablePanel.js","webpack://tkfmtools/./src/data/byStageToItem.js","webpack://tkfmtools/./src/pages/items/drop/filter.js"],"names":["TableWrapper","styled","Scrollable","props","$maxHeight","StyledSortableTable","SortableTable","data","head","body","sortFunc","defaultSortKey","handleModalOpen","maxHeight","striped","headerEnd","pageString","useLanguage","title","items","drop","filter","resultTitle","withHelp","onClickHelp","end","border","itemDropData","stageDropData","chapter","stages","forEach","stage","materials","trainItems","expPotions","rest","item","newDrop","rarity","id","push","i","toString","btnLayoutConfig","1360","992","768","624","0","410","1460","1200","1000","920","740","570","StyledToggleButton","ToggleButton","ItemImg","ImageSupplier","ItemFilterPanel","filterBtnValue","filterBy","clearBtnValue","userLanguage","itemString","Header","itemPanelTitle","onClick","tooltipText","deleteTooltip","DeleteIcon","ToggleButtonGroup","value","onChange","layoutConfig","Object","entries","map","entry","ind","length","key","name","alt","ImgTh","SortableTh","TableImg","ItemTh","requestSort","getSortDirection","tableHead","direction","TableHead","sortedData","TableBody","hover","energy","sortableItems","sortConfig","toStageKey","splits","split","parseInt","includes","sort","a","b","aKey","bKey","useState","isHelpModalOpen","state","setState","event","val","filteredStages","concat","drops","every","queryItem","flag","newStage","handelHelpModal","boolean","Head","helmet","description","path","Panels","panelsWidth","e","ResultTablePanel","helpModal","open","onClose","content","ariaLabelledby","ariaDescribedby"],"mappings":"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","file":"component---src-pages-items-drop-filter-js-43f4aca6de7cb309f4f3.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport Scrollable from 'containers/Scrollable';\r\nimport { useLanguage } from 'containers/LanguageProvider';\r\n\r\nimport Header from 'components/Header';\r\nimport SortableTable from 'components/SortableTable';\r\n\r\nconst TableWrapper = styled(Scrollable)`\r\n    max-height: ${props => props.$maxHeight};\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n`\r\nconst StyledSortableTable = styled(SortableTable)`\r\n    img {\r\n        width: 1.8rem; height: 1.8rem;\r\n    }\r\n    td {\r\n        padding-left: .75rem;\r\n    }\r\n`\r\nconst ResultTablePanel = ({\r\n    data,\r\n    head,\r\n    body,\r\n    sortFunc,\r\n    defaultSortKey,\r\n    handleModalOpen,\r\n    maxHeight,\r\n    striped,\r\n    headerEnd,\r\n}) => {\r\n    const { pageString } = useLanguage()\r\n\r\n    return (<>\r\n        <Header\r\n            title={pageString.items.drop.filter.resultTitle}\r\n            withHelp\r\n            onClickHelp={handleModalOpen}\r\n            end={headerEnd}\r\n            border\r\n        />\r\n        <TableWrapper $maxHeight={maxHeight}>\r\n            <StyledSortableTable\r\n                data={data}\r\n                head={head}\r\n                body={body}\r\n                sortFunc={sortFunc}\r\n                defaultSortKey={defaultSortKey}\r\n                striped={striped}\r\n            />\r\n        </TableWrapper>\r\n    </>)\r\n}\r\n\r\nexport default ResultTablePanel","import stageDropData from 'data/stageDrop.json';\r\n\r\nlet itemDropData = {}\r\n\r\n// from stages\r\nstageDropData.forEach(chapter => {\r\n    chapter.stages.forEach(stage => {\r\n        const { materials, trainItems, expPotions, ...rest } = stage\r\n\r\n        const dropItems = [materials, trainItems, expPotions]\r\n\r\n        dropItems.forEach(items => {\r\n            items.forEach(item => {\r\n                const newDrop = { chapter: chapter.chapter, rarity: item.rarity, ...rest }\r\n\r\n                if (itemDropData[item.id]) {\r\n                    itemDropData[item.id].drop.push(newDrop)\r\n                } else {\r\n                    itemDropData[item.id] = {\r\n                        drop: [newDrop]\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    })\r\n})\r\n\r\n// not available from stages\r\n//legendary items\r\n\r\nfor (let i = 1; i < 11; i++) {\r\n    itemDropData[(500 + i).toString()] = { drop: [] }\r\n}\r\n\r\n// skill items\r\nfor (let i = 1; i < 3; i++) {\r\n    itemDropData[(900 + i).toString()] = { drop: [] }\r\n}\r\n\r\nexport default itemDropData","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport {\r\n    TableHead as MuiTableHead,\r\n    TableBody as MuiTableBody,\r\n    TableRow as MuiTableRow,\r\n    TableCell as MuiTableCell\r\n} from '@material-ui/core';\r\n\r\nimport Panels from 'containers/Panels';\r\nimport { useLanguage } from 'containers/LanguageProvider';\r\n\r\nimport Head from \"components/Head\";\r\nimport ResultTablePanel from 'components/ResultTablePanel';\r\nimport { SortableTh } from 'components/SortableTable';\r\nimport Header from 'components/Header';\r\nimport { HeaderIconButton } from 'components/IconButton';\r\nimport ToggleButtonGroup, { ToggleButton } from 'components/ToggleButtonGroup';\r\nimport ImageSupplier from 'components/ImageSupplier';\r\nimport { TextModal } from 'components/Modal';\r\nimport { DeleteIcon } from 'components/icon';\r\n\r\nimport itemDropData from 'data/byStageToItem';\r\nimport stageDropData from 'data/stageDrop.json';\r\n\r\nconst btnLayoutConfig = {\r\n    'en': {\r\n        1360: 4,\r\n        992: 3,\r\n        768: 4,\r\n        624: 3,\r\n        0: 2\r\n    },\r\n    'zh-TW': {\r\n        1360: 5,\r\n        992: 4,\r\n        768: 5,\r\n        624: 4,\r\n        410: 3,\r\n        0: 2,\r\n    },\r\n    'ja': {\r\n        1360: 5,\r\n        992: 4,\r\n        768: 5,\r\n        624: 4,\r\n        410: 3,\r\n        0: 2,\r\n    },\r\n    'ko': {\r\n        1460: 5,\r\n        1200: 4,\r\n        1000: 3,\r\n        920: 5,\r\n        740: 4,\r\n        570: 3,\r\n        0: 2,\r\n    }\r\n}\r\n\r\nconst StyledToggleButton = styled(ToggleButton)`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: .85rem;\r\n`\r\nconst ItemImg = styled(ImageSupplier)`\r\n    width: 2.26rem; \r\n    height: 2.26rem;\r\n`\r\nconst ItemFilterPanel = ({\r\n    filterBtnValue,\r\n    filterBy,\r\n    clearBtnValue\r\n}) => {\r\n    const { userLanguage, pageString, itemString } = useLanguage()\r\n\r\n    return (<>\r\n        <Header\r\n            title={pageString.items.drop.filter.itemPanelTitle}\r\n            end={\r\n                <HeaderIconButton\r\n                    onClick={clearBtnValue}\r\n                    tooltipText={pageString.items.drop.filter.deleteTooltip}\r\n                >\r\n                    {DeleteIcon}\r\n                </HeaderIconButton>\r\n            }\r\n            border\r\n        />\r\n        <ToggleButtonGroup\r\n            value={filterBtnValue}\r\n            onChange={filterBy}\r\n            layoutConfig={btnLayoutConfig[userLanguage]}\r\n        >\r\n            {Object.entries(itemDropData).map((entry, ind) => {\r\n                if (entry[1].drop.length === 0) return true\r\n\r\n                return (\r\n                    <StyledToggleButton\r\n                        value={entry[0]}\r\n                        key={ind}\r\n                    >\r\n                        <ItemImg\r\n                            name={`item_${entry[0]}`}\r\n                            alt=''\r\n                        />\r\n                        {itemString.name[entry[0]]}\r\n                    </StyledToggleButton>\r\n                )\r\n            })}\r\n        </ToggleButtonGroup>\r\n    </>)\r\n}\r\n\r\nconst ImgTh = styled(SortableTh)`\r\n    &:after {\r\n        position: absolute;\r\n        top: calc(50% - .75rem);\r\n        margin-left: 2rem;\r\n    }\r\n`\r\nconst TableImg = styled(ImageSupplier)`\r\n    width: 1.8rem;\r\n    height: 1.8rem;\r\n`\r\nconst ItemTh = ({\r\n    requestSort,\r\n    getSortDirection,\r\n    data\r\n}) => {\r\n    const { pageString, itemString } = useLanguage()\r\n\r\n    if (data.length === 0) {\r\n        return (\r\n            <SortableTh>\r\n                {pageString.items.drop.filter.tableHead[1]}\r\n            </SortableTh>\r\n        )\r\n    }\r\n\r\n    return (\r\n        Object.entries(data[0]).map((entry, ind) => {\r\n            if (entry[0] === 'stage' || entry[0] === 'energy') {\r\n                return\r\n            }\r\n\r\n            return (\r\n                <ImgTh\r\n                    key={entry[0]}\r\n                    onClick={() => requestSort(entry[0])}\r\n                    direction={getSortDirection(entry[0])}\r\n                >\r\n                    <TableImg\r\n                        name={`item_${entry[0]}`}\r\n                        alt={itemString.name[entry[0]]}\r\n                    />\r\n                </ImgTh>\r\n            )\r\n        })\r\n    )\r\n}\r\n\r\nconst TableHead = ({\r\n    requestSort,\r\n    getSortDirection,\r\n    sortedData\r\n}) => {\r\n    const { pageString } = useLanguage()\r\n\r\n    return (\r\n        <MuiTableHead>\r\n            <MuiTableRow>\r\n                <SortableTh\r\n                    onClick={() => requestSort('stage')}\r\n                    direction={getSortDirection('stage')}\r\n                >\r\n                    {pageString.items.drop.filter.tableHead[0]}\r\n                </SortableTh>\r\n                <ItemTh\r\n                    requestSort={requestSort}\r\n                    getSortDirection={getSortDirection}\r\n                    data={sortedData}\r\n                />\r\n                <ImgTh\r\n                    onClick={() => requestSort('energy')}\r\n                    direction={getSortDirection('energy')}\r\n                >\r\n                    <TableImg\r\n                        name='energy'\r\n                        alt={pageString.items.drop.filter.tableHead[2]}\r\n                    />\r\n                </ImgTh>\r\n            </MuiTableRow>\r\n        </MuiTableHead>\r\n    )\r\n}\r\n\r\nconst TableBody = ({ sortedData }) => {\r\n    const { itemString } = useLanguage()\r\n\r\n    return (\r\n        <MuiTableBody>\r\n            {sortedData.map((stage, ind) => {\r\n                return (\r\n                    <MuiTableRow hover key={stage.stage}>\r\n                        <MuiTableCell>{stage.stage}</MuiTableCell>\r\n                        {Object.entries(stage).map((entry, ind) => {\r\n                            if (\r\n                                entry[0] === 'stage' ||\r\n                                entry[0] === 'energy'\r\n                            ) {\r\n                                return\r\n                            }\r\n\r\n                            return (\r\n                                <MuiTableCell key={ind}>\r\n                                    {itemString.rarity[entry[1]]}\r\n                                </MuiTableCell>\r\n                            )\r\n                        })}\r\n                        <MuiTableCell>{stage.energy}</MuiTableCell>\r\n                    </MuiTableRow>\r\n                )\r\n            })}\r\n        </MuiTableBody>\r\n    )\r\n}\r\n\r\nconst sortFunc = (sortableItems, sortConfig) => {\r\n    const toStageKey = (stage) => {\r\n        const splits = stage.split('-')\r\n\r\n        return (\r\n            parseInt(splits[0]) * 1000 +\r\n            parseInt(splits[1].split(' ')[0]) * 10 +\r\n            (splits[1].includes('free') ? 1 : 0) +\r\n            (splits.length > 2 ? parseInt(splits[2]) : 0)\r\n        )\r\n    }\r\n\r\n    sortableItems.sort((a, b) => {\r\n        let aKey\r\n        let bKey\r\n        if (sortConfig.key === 'stage') {\r\n            aKey = toStageKey(a.stage)\r\n            bKey = toStageKey(b.stage)\r\n        } else {\r\n            aKey = a[sortConfig.key]\r\n            bKey = b[sortConfig.key]\r\n        }\r\n        if (aKey < bKey) {\r\n            return sortConfig.direction === 'asc' ? -1 : 1\r\n        }\r\n        if (aKey > bKey) {\r\n            return sortConfig.direction === 'asc' ? 1 : -1\r\n        }\r\n        return 0\r\n    })\r\n}\r\n\r\nconst Filter = () => {\r\n    const { pageString } = useLanguage()\r\n\r\n    const [state, setState] = useState({\r\n        filterBtnValue: [],\r\n        data: [],\r\n        isHelpModalOpen: false,\r\n    })\r\n\r\n    const filterBy = (event, val) => {\r\n        if (val.length === 0) {\r\n            setState((state) => ({\r\n                ...state,\r\n                filterBtnValue: val,\r\n                data: [],\r\n            }))\r\n            return;\r\n        }\r\n\r\n        const stageDrop = [].concat(...stageDropData.map(chapter => (\r\n            chapter.stages.map(stage => {\r\n                const { materials, trainItems, expPotions, ...rest } = stage\r\n                return {\r\n                    ...rest,\r\n                    drops: materials.concat(trainItems, expPotions),\r\n                    chapter: chapter.chapter\r\n                }\r\n            })\r\n        )))\r\n\r\n        let filteredStages = stageDrop.filter(stage => (\r\n            val.every(queryItem => {\r\n                let flag = false\r\n                stage.drops.forEach(drop => {\r\n                    if (drop.id === queryItem) {\r\n                        flag = true\r\n                        return false\r\n                    }\r\n                })\r\n                return flag\r\n            })\r\n        ))\r\n\r\n        filteredStages = filteredStages.map(stage => {\r\n            const parsedStage = stage.chapter + '-' + stage.stage\r\n            const newStage = { stage: parsedStage, energy: stage.energy }\r\n            stage.drops.forEach(item => {\r\n                if (val.includes(item.id)) {\r\n                    newStage[item.id] = item.rarity\r\n                }\r\n            })\r\n            return newStage\r\n        })\r\n\r\n        setState((state) => ({\r\n            ...state,\r\n            filterBtnValue: val,\r\n            data: filteredStages,\r\n        }))\r\n    }\r\n\r\n    const handelHelpModal = (boolean) => () => {\r\n        setState((state) => ({\r\n            ...state,\r\n            isHelpModalOpen: boolean,\r\n        }))\r\n    }\r\n\r\n    return (<>\r\n        <Head\r\n            title={pageString.items.drop.filter.helmet.title}\r\n            description={pageString.items.drop.filter.helmet.description}\r\n            path='/items/drop/filter/'\r\n        />\r\n        <Panels panelsWidth={['62%', '38%']}>\r\n            <ItemFilterPanel\r\n                filterBtnValue={state.filterBtnValue}\r\n                filterBy={filterBy}\r\n                clearBtnValue={(e) => filterBy(e, [])}\r\n            />\r\n            <ResultTablePanel\r\n                data={state.data}\r\n                head={<TableHead />}\r\n                body={<TableBody />}\r\n                sortFunc={sortFunc}\r\n                defaultSortKey={state.filterBtnValue[0]}\r\n                handleModalOpen={handelHelpModal(true)}\r\n                maxHeight='calc(100vh - 16rem)'\r\n                striped\r\n            />\r\n        </Panels>\r\n        <TextModal\r\n            title={pageString.items.drop.filter.helpModal.title}\r\n            open={state.isHelpModalOpen}\r\n            onClose={handelHelpModal(false)}\r\n            content={pageString.items.drop.filter.helpModal.content}\r\n            ariaLabelledby=\"help-modal-title\"\r\n            ariaDescribedby=\"help-modal-description\"\r\n        />\r\n    </>)\r\n}\r\n\r\nexport default Filter"],"sourceRoot":""}